<!DOCTYPE html>
<html class="standalone">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=570">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
	<title>SolarNode Image Maker</title>
	<link type="text/css" rel="stylesheet" href="css/dialog-polyfill.css">
	<link type="text/css" rel="stylesheet" href="css/nim.css">
</head>

<body>
	<header class="hboxrow">
		<h1>SolarNode Image Maker</h1>
		<i class="fas fa-check-circle fa-2x auth result success hidden" title="Authorization successful"></i>
		<i class="fas fa-times-circle fa-2x auth result error hidden" title="Authorization failed"></i>
		<input type="text" class="auth" name="token" placeholder="Token" value="" autocomplete="off" autocorrect="off"
		 autocapitalize="off" spellcheck="false">
		<input type="password" class="auth" name="secret" placeholder="Secret" value="">
		<button type="button" id="authorize">Authorize</button>
	</header>
	<main class="hboxrow">
		<section class="choose-base">
			<h2>Ready</h2>
			<p>Choose the base OS image you'd like to customize.</p>
			<div id="base-image-listing"></div>
		</section>
		<section class="prepare disabled">
			<h2>Steady <span class="active-image-name"></span></h2>
			<p>Select the items you'd like to customize.</p>
			<form id="nim-form" enctype="multipart/form-data">
				<h3>Guestfish script</h3>
				<p>A <a href="http://libguestfs.org/guestfish.1.html">guestfish</a> script is required
					to perform the customization. This file must be named with a <code>.fish</code>
					extension.</p>
				<input type="file" name="dataFile" accept="*.fish" required>

				<h3>Data files</h3>
				<p>You can <b>optionally</b> provide any number of data files that will be made available to
					the guestfish script. A common case is to provide one or more tar archives that can be
					extracted into the root filesystem. The file names must <b>exactly</b> match the names
					used in the guestfish script.</p>
				<div id="data-file-container">
					<input type="file" name="dataFile" accept="*.*">
					<button id="add-data-file" class="btn icon-btn" type="button">
						<i class="fas fa-plus-circle fa-lg"></i>
					</button>
				</div>

				<h3>Options</h3>
				<p>You can include an <b>optional</b> JSON document with environment variables
					that get passed to the guestfish script.</p>
				<pre class="example">{
  "environment": {
    "mode" : "production"
  }
}</pre>
				<input type="file" name="options" accept="*.json">

				<h3>Firstboot scripts</h3>
				<p>You can <b>optionally</b> provide any number of shell scripts that will be executed
					the first time the OS boots up, as the <code>root</code> user. These files must be named with a <code>.firstboot</code>
					extension. Here's an example script that updates the <code>apt</code> package cache
					and installs all available updates:</p>
				<pre class="example">#!/usr/bin/env sh
apt-get -qq update
apt-get -qq upgrade
apt-get -qq clean</pre>
				<div id="firstboot-container">
					<input type="file" name="dataFile" accept="*.firstboot">
					<button id="add-firstboot" class="btn icon-btn" type="button">
						<i class="fas fa-plus-circle fa-lg"></i>
					</button>
				</div>
			</form>
		</section>
		<section class="submit disabled">
			<h2>Go!</h2>
			<p>Once you're satisifed with your care, hit the <b>Press Me</b> button to submit your request.</p>
			<button type="button" id="submit-btn">Press Me</button>
		</section>
	</main>
	<footer>
		<p>Powered by <a href="https://solarnetwork.github.io/">SolarNetwork</a>.</p>
	</footer>
</body>

</html>